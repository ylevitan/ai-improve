<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#6200ea" />
  <title>AI-Improve</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .header {
      background-color: #6200ea;
      color: white;
      padding: 40px 20px;
      text-align: center;
    }

    .section {
      padding: 50px 20px;
    }

    .footer {
      background-color: #f1f1f1;
      padding: 20px;
      text-align: center;
    }

    .section-title {
      margin-bottom: 30px;
    }

    .esp-button {
      display: inline-block;
      background-color: #2563eb;
      color: white;
      font-size: 1.1em;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      text-decoration: none;
      font-family: "Segoe UI", sans-serif;
      transition: background-color 0.3s ease;
    }

    .esp-button:hover {
      background-color: #1d4ed8;
    }
  </style>
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">AI-Improve</a>
    </div>
  </nav>

  <div class="header">
    <h1>AI-Improve.com</h1>
    <p>Exploring how AI transforms Travel, Art, and Robotics</p>
  </div>

  <div class="container">
    <div class="row section g-4" id="travel">
      <div class="col-12">
        <h2 class="section-title">‚úàÔ∏è Travel</h2>
        <ul>
          <li>Smart itinerary planner</li>
          <li>AI language & culture guides</li>
          <li>Personalized travel companions</li>
        </ul>
        <p>
          <a href="travel.html" class="esp-button">Try the AI Travel Itinerary Planner ‚Üí</a>
        </p>
      </div>

      <!-- NEW GEOLOCATION + WIKIPEDIA SECTION -->
      <div class="col-12 mt-4">
        <h5 class="mb-3">üìç WhereWise AI Travel Companion</h5>
        <button class="esp-button" onclick="getLocation()">Find Out Where I Am</button>
        <p id="location-output" class="mt-3"></p>
      </div>
    </div>

    <div class="row section" id="art">
      <div class="col-md-6">
        <h2 class="section-title">üé® Art</h2>
        <ul>
          <li>AI-generated paintings and music</li>
          <li>Artistic collaborations with AI</li>
          <li>Restoration and digital enhancement</li>
        </ul>
      </div>
    </div>

    <div class="row section" id="robots">
      <div class="col-md-6">
        <h2 class="section-title">ü§ñ Robots</h2>
        <ul>
          <li>Companion and care robots</li>
          <li>Warehouse and delivery automation</li>
          <li>Educational and service robotics</li>
        </ul>
        <h2>Explore Our Tools</h2>
        <p>Need help with Blue Yonder Enterprise Supply Planning?</p>
        <a href="https://huggingface.co/spaces/ylevitan11/esp-by-fun" target="_blank" class="esp-button">üí¨ Launch ESP_BY_FUN AI Agent</a>
      </div>
    </div>
  </div>

  <div class="footer">
    <p>Have an idea or collaboration? Contact: <a href="mailto:ylevitan@ai-improve.com">ylevitan@ai-improve.com</a></p>
    <p>&copy; 2025 AI-Improve.com</p>
  </div>

  <script>
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        document.getElementById("location-output").innerHTML = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;

      document.getElementById("location-output").innerHTML =
        `üìå Coordinates: Latitude ${lat.toFixed(5)}, Longitude ${lon.toFixed(5)}<br>Looking up city...`;

      fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`)
        .then(response => response.json())
        .then(locationData => {
          const address = locationData.address;
          const city = address.city || address.town || address.village || address.hamlet || "Unknown";
          const country = address.country || "";

          document.getElementById("location-output").innerHTML =
            `üìç You are in <strong>${city}, ${country}</strong><br>üìå Latitude: ${lat.toFixed(5)}, Longitude: ${lon.toFixed(5)}<br>Getting local stories...`;

          // AI backend call
          fetch("http://localhost:8000/get-ai-info", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ lat, lon, city })
          })
          .then(response => response.json())
          .then(data => {
            document.getElementById("location-output").innerHTML += `<br><br><strong>üß† AI says:</strong><br>${data.message}`;
          });

          // Wikipedia summary
          getWikipediaSummary(city);
        })
        .catch(error => {
          document.getElementById("location-output").innerHTML += "<br><br>‚ö†Ô∏è Failed to retrieve city name.";
        });
    }

    function getWikipediaSummary(city) {
      const wikiUrl = `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(city)}`;

      fetch(wikiUrl)
        .then(response => response.json())
        .then(data => {
          if (data.extract) {
            document.getElementById("location-output").innerHTML += `
              <br><br><strong>üìö From Wikipedia:</strong><br>${data.extract}
              <br><a href="https://en.wikipedia.org/wiki/${encodeURIComponent(city)}" target="_blank">Read more on Wikipedia ‚Üí</a>
            `;
          } else {
            document.getElementById("location-output").innerHTML += "<br><br>üìö No Wikipedia summary found.";
          }
        })
        .catch(err => {
          document.getElementById("location-output").innerHTML += "<br><br>‚ö†Ô∏è Could not load Wikipedia summary.";
        });
    }

    function showError(error) {
      let message = "";
      switch(error.code) {
        case error.PERMISSION_DENIED:
          message = "Permission denied for Geolocation.";
          break;
        case error.POSITION_UNAVAILABLE:
          message = "Location information is unavailable.";
          break;
        case error.TIMEOUT:
          message = "Request timed out.";
          break;
        default:
          message = "An unknown error occurred.";
          break;
      }
      document.getElementById("location-output").innerHTML = message;
    }
  </script>

</body>
</html>
